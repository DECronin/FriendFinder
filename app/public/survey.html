<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FF Survey</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>
<body>
    <header>Survey <a href="./home.html">Home</a></header> 
    <form>
        <div class="user">
            <h1>User Details:</h1>
            Username: 
            <input type="text" id="username"><br>
            Image Link: 
            <input type="url" id="image"><br>
        </div>
        <div class="survey">
            Slide the bar Left(Agree) and Right(Disagrre) along the 5 points as needed. [Middle is Neutral]. <br><br>
            1==============
            <input type="range" id="q1" min="1" max="5"> <br>
            2==============
            <input type="range" id="q2" min="1" max="5"> <br>
            3==============
            <input type="range" id="q3" min="1" max="5"> <br>
            4==============
            <input type="range" id="q4" min="1" max="5"> <br>
            5==============
            <input type="range" id="q5" min="1" max="5"> <br>
            6==============
            <input type="range" id="q6" min="1" max="5"> <br>
            7==============
            <input type="range" id="q7" min="1" max="5"> <br>
            8==============
            <input type="range" id="q8" min="1" max="5"> <br>
            9==============
            <input type="range" id="q9" min="1" max="5"> <br>
            10=============
            <input type="range" id="q10" min="1" max="5"> <br>
            <!-- can be created dinamically from array through loop then referanced with i? -->
        </div>
    </form>
    <button id="submit" onclick="sendData()">Submit</button>

    <div id="modal-overlay">
        <div id="modal">
                <img src="" alt="Your matches photo" id="modal-image">
                <h2>Name: <span id="modal-name"></span></h2>
        </div>
    </div>

    <script>

        function sendData(){
            event.preventDefault();
            let userInputs = {
                "name" : document.getElementById("username").value.tpString(),
                "photo" : document.getElementById("image").value.toString(),
                "scores" : [
                    parseInt(document.getElementById("q1").value),
                    parseInt(document.getElementById("q2").value),
                    parseInt(document.getElementById("q3").value),
                    parseInt(document.getElementById("q4").value),
                    parseInt(document.getElementById("q5").value),
                    parseInt(document.getElementById("q6").value),
                    parseInt(document.getElementById("q7").value),
                    parseInt(document.getElementById("q8").value),
                    parseInt(document.getElementById("q9").value),
                    parseInt(document.getElementById("q10").value)
                ]
            }

            $.post("./api/friends", userInputs, function(data){
                if(data){
                    alert(`Survey Recieved. Please wait while we calculate your results.`);
                } else {
                    alert(`Please Provide Valid Inputs.`)
                }
            })

            $.post("/api/friends", person, data => {
                $("#modal-name").text(data.name);
                $("#modal-image").attr("src", data.image);
                $("#modal-overlay").show();
            });
            // reset page to empty inputs?
        }
    </script>
</body>
</html>